{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sinajp\\\\OneDrive - SAS\\\\Documents\\\\GitHub\\\\ajay17m.github.io-1\\\\viya_app\\\\src\\\\pages\\\\Mas.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useContext, Fragment } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Instance from '../apis/Instance';\nimport { AuthContext } from '../contexts';\nimport MASForm from '../components/MASForm';\nimport MASResults from '../components/MASResults';\nimport Loading from '../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Mas() {\n  _s();\n\n  const {\n    authInfo\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [scoreData, setScoreData] = useState({});\n  const [message, setMessage] = useState();\n  const history = useHistory();\n  useEffect(() => {\n    if (authInfo.authenticated === false) {\n      history.push(\"/logon\");\n    }\n  }, [authInfo.authenticated, history]);\n\n  const handleEvaluate = selection => {\n    setLoading(true);\n    const endpoint = 'microanalyticScore/modules/heart_attack_prediction/steps/score';\n    const headers = {\n      'Content-Type': 'application/vnd.sas.microanalytic.module.step.input+json',\n      'Accept': 'application/vnd.sas.microanalytic.module.step.output+json'\n    };\n    const formData = {\n      inputs: []\n    };\n\n    for (let element in selection) {\n      const data = selection[element];\n      formData.inputs.push({\n        name: data.variable,\n        value: data.value\n      });\n    }\n\n    ;\n    Instance.post(endpoint, formData, {\n      headers: headers\n    }).then(response => {\n      if (response.status === 201 && response.data.executionState === \"completed\") {\n        const output = {};\n        response.data.outputs.forEach(variable => output[variable.name] = variable.value);\n        setScoreData(output);\n        setLoading(false);\n      } else {\n        setMessage(\"Please try again!\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MASForm, {\n      onEvaluate: handleEvaluate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Loading, {\n      status: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), Object.keys(scoreData).length === 0 ? null : /*#__PURE__*/_jsxDEV(MASResults, {\n      data: scoreData,\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 60\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Mas, \"VTqWk5ZsRI1fp/GPVcdyVlPN0RQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = Mas;\nexport default Mas;\n\nvar _c;\n\n$RefreshReg$(_c, \"Mas\");","map":{"version":3,"names":["useEffect","useState","useContext","Fragment","useHistory","Instance","AuthContext","MASForm","MASResults","Loading","Mas","authInfo","loading","setLoading","scoreData","setScoreData","message","setMessage","history","authenticated","push","handleEvaluate","selection","endpoint","headers","formData","inputs","element","data","name","variable","value","post","then","response","status","executionState","output","outputs","forEach","Object","keys","length"],"sources":["C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/src/pages/Mas.js"],"sourcesContent":["import { useEffect, useState, useContext, Fragment } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport Instance from '../apis/Instance';\r\n\r\nimport { AuthContext } from '../contexts';\r\n\r\nimport MASForm from '../components/MASForm';\r\nimport MASResults from '../components/MASResults';\r\nimport Loading from '../components/Loading';\r\n\r\nfunction Mas() {\r\n    const { authInfo } = useContext(AuthContext);\r\n    const [loading, setLoading] = useState(false);\r\n    const [scoreData, setScoreData] = useState({});\r\n    const [message, setMessage] = useState();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if (authInfo.authenticated === false) {\r\n            history.push(\"/logon\");\r\n        }\r\n    }, [authInfo.authenticated, history]);\r\n\r\n    const handleEvaluate = (selection) => {\r\n        setLoading(true)\r\n        const endpoint = 'microanalyticScore/modules/heart_attack_prediction/steps/score';\r\n        const headers = {\r\n            'Content-Type': 'application/vnd.sas.microanalytic.module.step.input+json',\r\n            'Accept': 'application/vnd.sas.microanalytic.module.step.output+json'\r\n        };\r\n        const formData = { inputs: [] };\r\n        for (let element in selection) {\r\n            const data = selection[element];\r\n            formData.inputs.push({ name: data.variable, value: data.value });\r\n        };\r\n\r\n        Instance.post(endpoint, formData, { headers: headers })\r\n            .then(response => {\r\n                if (response.status === 201 && response.data.executionState === \"completed\") {\r\n                    const output = {};\r\n                    response.data.outputs.forEach(variable => output[variable.name] = variable.value);\r\n                    setScoreData(output);\r\n                    setLoading(false);\r\n                } else {\r\n                    setMessage(\"Please try again!\");\r\n                }\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <MASForm onEvaluate={handleEvaluate} />\r\n            <Loading status={loading} />\r\n            { Object.keys(scoreData).length === 0 ? null : <MASResults data={scoreData} message={message} />}\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default Mas;"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,UAA9B,EAA0CC,QAA1C,QAA0D,OAA1D;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAOC,QAAP,MAAqB,kBAArB;AAEA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,OAAP,MAAoB,uBAApB;;;AAEA,SAASC,GAAT,GAAe;EAAA;;EACX,MAAM;IAAEC;EAAF,IAAeT,UAAU,CAACI,WAAD,CAA/B;EACA,MAAM,CAACM,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM,CAACa,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,EAAtC;EACA,MAAMiB,OAAO,GAAGd,UAAU,EAA1B;EAEAJ,SAAS,CAAC,MAAM;IACZ,IAAIW,QAAQ,CAACQ,aAAT,KAA2B,KAA/B,EAAsC;MAClCD,OAAO,CAACE,IAAR,CAAa,QAAb;IACH;EACJ,CAJQ,EAIN,CAACT,QAAQ,CAACQ,aAAV,EAAyBD,OAAzB,CAJM,CAAT;;EAMA,MAAMG,cAAc,GAAIC,SAAD,IAAe;IAClCT,UAAU,CAAC,IAAD,CAAV;IACA,MAAMU,QAAQ,GAAG,gEAAjB;IACA,MAAMC,OAAO,GAAG;MACZ,gBAAgB,0DADJ;MAEZ,UAAU;IAFE,CAAhB;IAIA,MAAMC,QAAQ,GAAG;MAAEC,MAAM,EAAE;IAAV,CAAjB;;IACA,KAAK,IAAIC,OAAT,IAAoBL,SAApB,EAA+B;MAC3B,MAAMM,IAAI,GAAGN,SAAS,CAACK,OAAD,CAAtB;MACAF,QAAQ,CAACC,MAAT,CAAgBN,IAAhB,CAAqB;QAAES,IAAI,EAAED,IAAI,CAACE,QAAb;QAAuBC,KAAK,EAAEH,IAAI,CAACG;MAAnC,CAArB;IACH;;IAAA;IAED1B,QAAQ,CAAC2B,IAAT,CAAcT,QAAd,EAAwBE,QAAxB,EAAkC;MAAED,OAAO,EAAEA;IAAX,CAAlC,EACKS,IADL,CACUC,QAAQ,IAAI;MACd,IAAIA,QAAQ,CAACC,MAAT,KAAoB,GAApB,IAA2BD,QAAQ,CAACN,IAAT,CAAcQ,cAAd,KAAiC,WAAhE,EAA6E;QACzE,MAAMC,MAAM,GAAG,EAAf;QACAH,QAAQ,CAACN,IAAT,CAAcU,OAAd,CAAsBC,OAAtB,CAA8BT,QAAQ,IAAIO,MAAM,CAACP,QAAQ,CAACD,IAAV,CAAN,GAAwBC,QAAQ,CAACC,KAA3E;QACAhB,YAAY,CAACsB,MAAD,CAAZ;QACAxB,UAAU,CAAC,KAAD,CAAV;MACH,CALD,MAKO;QACHI,UAAU,CAAC,mBAAD,CAAV;MACH;IACJ,CAVL;EAWH,CAxBD;;EA0BA,oBACI,QAAC,QAAD;IAAA,wBACI,QAAC,OAAD;MAAS,UAAU,EAAEI;IAArB;MAAA;MAAA;MAAA;IAAA,QADJ,eAEI,QAAC,OAAD;MAAS,MAAM,EAAET;IAAjB;MAAA;MAAA;MAAA;IAAA,QAFJ,EAGM4B,MAAM,CAACC,IAAP,CAAY3B,SAAZ,EAAuB4B,MAAvB,KAAkC,CAAlC,GAAsC,IAAtC,gBAA6C,QAAC,UAAD;MAAY,IAAI,EAAE5B,SAAlB;MAA6B,OAAO,EAAEE;IAAtC;MAAA;MAAA;MAAA;IAAA,QAHnD;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAOH;;GA9CQN,G;UAKWN,U;;;KALXM,G;AAgDT,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}