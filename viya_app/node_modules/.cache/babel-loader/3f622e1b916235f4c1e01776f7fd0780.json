{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sinajp\\\\OneDrive - SAS\\\\Documents\\\\GitHub\\\\ajay17m.github.io-1\\\\viya_app\\\\src\\\\pages\\\\Logon.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Instance from '../apis/Instance';\nimport { AuthContext } from '../contexts';\nimport Container from 'react-bootstrap/Container';\nimport Alert from 'react-bootstrap/Alert';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Logon() {\n  _s();\n\n  const {\n    authInfo,\n    setAuthInfo\n  } = useContext(AuthContext);\n  const [alert, setAlert] = useState('');\n  const history = useHistory();\n  let userInput = /*#__PURE__*/React.createRef();\n  let passwordInput = /*#__PURE__*/React.createRef();\n\n  const authenticate = event => {\n    event.preventDefault();\n    setAlert('');\n    const endpoint = \"/SASLogon/oauth/token\";\n    const user = userInput.current.value;\n    const password = passwordInput.current.value;\n    const data = {\n      grant_type: \"password\",\n      response_type: \"bearer\",\n      username: user,\n      password: password\n    };\n    const headers = {\n      'Authorization': \"Basic \" + btoa('viya_app:Orion123'),\n      'Content-Type': 'application/x-www-form-urlencoded'\n    };\n    Instance.post(endpoint, new URLSearchParams(data), {\n      headers: headers\n    }).then(response => {\n      if (response.status === 200) {\n        Instance.defaults.headers.common['Authorization'] = `${response.data.token_type} ${response.data.access_token}`;\n        setAuthInfo({ ...authInfo,\n          authenticated: true,\n          user: user,\n          tokenInfo: response.data\n        });\n        history.goBack();\n        return null;\n      }\n    }).catch(error => {\n      Instance.defaults.headers.common['Authorization'] = null;\n      setAlert(`User ${user} could not be authenticated, please check user name and password!`);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: authenticate,\n      children: /*#__PURE__*/_jsxDEV(Form.Row, {\n        className: \"justify-content-md-center\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          className: \"col-4\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            ref: userInput,\n            type: \"input\",\n            placeholder: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          className: \"col-4\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            ref: passwordInput,\n            type: \"password\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          className: \"col-1\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            type: \"submit\",\n            children: \"Logon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-md-center p-3\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: \"{{span:10}}\",\n        children: alert.length > 0 ? /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          children: alert\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 41\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Logon, \"E9Iz48/fYx0DL1z0G7XaoGXXGI8=\", false, function () {\n  return [useHistory];\n});\n\n_c = Logon;\nexport default Logon;\n\nvar _c;\n\n$RefreshReg$(_c, \"Logon\");","map":{"version":3,"names":["React","useContext","useState","useHistory","Instance","AuthContext","Container","Alert","Form","Button","Col","Row","Logon","authInfo","setAuthInfo","alert","setAlert","history","userInput","createRef","passwordInput","authenticate","event","preventDefault","endpoint","user","current","value","password","data","grant_type","response_type","username","headers","btoa","post","URLSearchParams","then","response","status","defaults","common","token_type","access_token","authenticated","tokenInfo","goBack","catch","error","length"],"sources":["C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/src/pages/Logon.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport Instance from '../apis/Instance';\n\nimport { AuthContext } from '../contexts';\n\nimport Container from 'react-bootstrap/Container';\nimport Alert from 'react-bootstrap/Alert';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\n\nfunction Logon() {\n    const { authInfo, setAuthInfo } = useContext(AuthContext);\n    const [alert, setAlert] = useState('');\n    const history = useHistory();\n    let userInput = React.createRef();\n    let passwordInput = React.createRef();\n\n    const authenticate = (event) => {\n        event.preventDefault();\n        setAlert('');\n        const endpoint = \"/SASLogon/oauth/token\";\n        const user = userInput.current.value;\n        const password = passwordInput.current.value;\n        const data = {\n            grant_type: \"password\",\n            response_type: \"bearer\",\n            username: user,\n            password: password\n        };\n\n        const headers = {\n            'Authorization': \"Basic \" + btoa('viya_app:Orion123'),\n            'Content-Type': 'application/x-www-form-urlencoded'\n        };\n\n        Instance.post(endpoint, new URLSearchParams(data), { headers: headers })\n            .then(response => {\n                if (response.status === 200) {\n                    Instance.defaults.headers.common['Authorization'] = `${response.data.token_type} ${response.data.access_token}`;\n                    setAuthInfo({ ...authInfo, authenticated: true, user: user, tokenInfo: response.data });\n                    history.goBack();\n                    return null;\n                }\n            }).catch(error => {\n                Instance.defaults.headers.common['Authorization'] = null;\n                setAlert(`User ${user} could not be authenticated, please check user name and password!`);\n            });\n    }\n\n    return (\n        <Container>\n            <Form onSubmit={authenticate}>\n                <Form.Row className='justify-content-md-center'>\n                    <Col className='col-4'>\n                        <Form.Control ref={userInput} type=\"input\" placeholder=\"Login\" />\n                    </Col>\n                    <Col className=\"col-4\">\n                        <Form.Control ref={passwordInput} type=\"password\" placeholder=\"Password\" />\n                    </Col>\n                    <Col className=\"col-1\">\n                        <Button variant=\"primary\" type=\"submit\">Logon</Button>\n                    </Col>\n                </Form.Row>\n            </Form>\n            <Row className=\"justify-content-md-center p-3\">\n                <Col md='{{span:10}}'>\n                    {alert.length > 0 ? <Alert variant='danger'>{alert}</Alert> : null}\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\nexport default Logon;"],"mappings":"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"},"metadata":{},"sourceType":"module"}