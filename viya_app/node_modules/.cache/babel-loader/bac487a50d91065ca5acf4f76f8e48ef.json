{"ast":null,"code":"import _slicedToArray from\"C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext,Fragment}from'react';import Instance from'../../apis/Instance';import{AuthContext}from'../../contexts';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import Col from'react-bootstrap/Col';import LibrarySelector from'./LibrarySelector';import TableSelector from'./TableSelector';import Loading from'../Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ComputeSelector(props){var _useContext=useContext(AuthContext),authInfo=_useContext.authInfo;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),libraries=_useState2[0],setLibraries=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tables=_useState4[0],setTables=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedLibrary=_useState6[0],setSelectedLibrary=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedTable=_useState8[0],setSelectedTable=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var getSelectedLibrary=function getSelectedLibrary(selected){setSelectedLibrary(selected.target.value);};var getSelectedTable=function getSelectedTable(selected){setSelectedTable(selected.target.value);};useEffect(function(){setLoading(true);if(\"compute\"in authInfo.session&&authInfo.session.compute!==undefined){var endpoint=\"/compute/sessions/\".concat(authInfo.session.compute,\"/data\");var headers={\"Accept\":\"application/vnd.sas.collection+json\"};Instance.get(endpoint,{headers:headers}).then(function(response){var data=response.data.items.map(function(item){return[item.name,item.id];});setLibraries(data);setLoading(false);});}},[authInfo.session,setLoading]);useEffect(function(){setLoading(true);setSelectedTable(null);setTables([]);if(selectedLibrary!==null){var endpoint=\"/compute/sessions/\".concat(authInfo.session.compute,\"/data/\").concat(selectedLibrary,\"?limit=1000\");var headers={\"Accept\":\"application/vnd.sas.collection+json\"};Instance.get(endpoint,{headers:headers}).then(function(response){if(\"items\"in response.data){var data=response.data.items.map(function(item){return[item.name,item.id];});setTables(data);}setLoading(false);});}},[selectedLibrary,authInfo.session.compute]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Form,{onSubmit:props.onSelect,style:{padding:10},children:/*#__PURE__*/_jsxs(Form.Row,{children:[/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(LibrarySelector,{data:libraries,type:\"SAS\",handleSelection:getSelectedLibrary})}),/*#__PURE__*/_jsx(Col,{sm:\"7\",children:/*#__PURE__*/_jsx(TableSelector,{data:tables,type:\"SAS\",disabled:selectedLibrary===null?true:false,handleSelection:getSelectedTable})}),/*#__PURE__*/_jsx(Col,{sm:\"1\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:selectedTable===null?true:false,children:\"Display\"})})]})}),/*#__PURE__*/_jsx(Loading,{status:loading})]});}export default ComputeSelector;","map":{"version":3,"names":["React","useEffect","useState","useContext","Fragment","Instance","AuthContext","Form","Button","Col","LibrarySelector","TableSelector","Loading","ComputeSelector","props","authInfo","libraries","setLibraries","tables","setTables","selectedLibrary","setSelectedLibrary","selectedTable","setSelectedTable","loading","setLoading","getSelectedLibrary","selected","target","value","getSelectedTable","session","compute","undefined","endpoint","headers","get","then","response","data","items","map","item","name","id","onSelect","padding"],"sources":["C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/src/components/Selectors/ComputeSelector.js"],"sourcesContent":["import React, { useEffect, useState, useContext, Fragment } from 'react';\n\nimport Instance from '../../apis/Instance';\n\nimport { AuthContext } from '../../contexts';\n\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\n\nimport LibrarySelector from './LibrarySelector';\nimport TableSelector from './TableSelector';\nimport Loading from '../Loading';\n\nfunction ComputeSelector(props) {\n    const { authInfo } = useContext(AuthContext);\n    const [libraries, setLibraries] = useState([]);\n    const [tables, setTables] = useState([]);\n    const [selectedLibrary, setSelectedLibrary] = useState(null);\n    const [selectedTable, setSelectedTable] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const getSelectedLibrary = (selected) => {\n        setSelectedLibrary(selected.target.value);\n    }\n    const getSelectedTable = (selected) => {\n        setSelectedTable(selected.target.value);\n    }\n\n    useEffect(() => {\n        setLoading(true);\n        if (\"compute\" in authInfo.session && authInfo.session.compute !== undefined) {\n            const endpoint = `/compute/sessions/${authInfo.session.compute}/data`;\n            const headers = {\n                \"Accept\": \"application/vnd.sas.collection+json\"\n            }\n            Instance.get(endpoint, { headers: headers })\n                .then(response => {\n                    const data = response.data.items.map(item => [item.name, item.id]);\n                    setLibraries(data);\n                    setLoading(false);\n                });\n        }\n    }, [authInfo.session, setLoading]);\n\n    useEffect(() => {\n        setLoading(true);\n        setSelectedTable(null);\n        setTables([]);\n        if (selectedLibrary !== null) {\n            const endpoint = `/compute/sessions/${authInfo.session.compute}/data/${selectedLibrary}?limit=1000`;\n            const headers = {\n                \"Accept\": \"application/vnd.sas.collection+json\"\n            };\n            Instance.get(endpoint,{ headers: headers })\n                .then(response => {\n                    if (\"items\" in response.data) {\n                        const data = response.data.items.map(item => [item.name, item.id]);\n                        setTables(data);\n                    }\n                    setLoading(false);\n                });\n        }\n    }, [selectedLibrary, authInfo.session.compute]);\n\n    return (\n        <Fragment>\n            <Form onSubmit={props.onSelect} style={{ padding: 10 }}>\n                <Form.Row>\n                    <Col sm=\"4\">\n                        <LibrarySelector data={libraries} type=\"SAS\" handleSelection={getSelectedLibrary} />\n                    </Col>\n                    <Col sm=\"7\">\n                        <TableSelector data={tables} type=\"SAS\" disabled={selectedLibrary === null ? true : false} handleSelection={getSelectedTable} />\n                    </Col>\n                    <Col sm=\"1\">\n                        <Button variant=\"primary\" type=\"submit\" disabled={selectedTable === null ? true : false} >\n                            Display\n                    </Button>\n                    </Col>\n                </Form.Row>\n            </Form>\n            <Loading status={loading} />\n        </Fragment>\n    )\n}\n\nexport default ComputeSelector;"],"mappings":"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"},"metadata":{},"sourceType":"module"}