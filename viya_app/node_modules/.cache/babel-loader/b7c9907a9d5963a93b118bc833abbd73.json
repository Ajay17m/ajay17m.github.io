{"ast":null,"code":"import _slicedToArray from\"C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useContext,useEffect}from'react';import{Form,Col,Button}from'react-bootstrap';import{AuthContext}from'../../contexts';import Instance from'../../apis/Instance';import LibrarySelector from'../Selectors/LibrarySelector';import TableSelector from'../Selectors/TableSelector';import Loading from'../Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function JobSelector(props){var _useContext=useContext(AuthContext),authInfo=_useContext.authInfo;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),libraries=_useState2[0],setLibraries=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tables=_useState4[0],setTables=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedLibrary=_useState6[0],setSelectedLibrary=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedTable=_useState8[0],setSelectedTable=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var getSelectedLibrary=function getSelectedLibrary(selected){setSelectedLibrary(selected.target.value);};var getSelectedTable=function getSelectedTable(selected){setSelectedTable(selected.target.value);};useEffect(function(){if(authInfo.authenticated===true&&authInfo.csrf.job!==undefined){setLoading(true);var endpoint=\"SASJobExecution/\";var headers={'X-CSRF-HEADER':'X-CSRF-TOKEN','X-CSRF-TOKEN':authInfo.csrf.job};var params={_program:\"/gelcontent/Demo/VISUAL/Jobs/extractData\",reqType:\"getlibraries\"};Instance.get(endpoint,{headers:headers,params:params}).then(function(response){var data=response.data.map(function(element){return[element.libname];});setLibraries(data);setLoading(false);});}},[authInfo.authenticated,authInfo.csrf,setLoading]);useEffect(function(){setLoading(true);setSelectedTable(null);setTables([]);if(selectedLibrary!==null){var endpoint=\"SASJobExecution/\";var headers={'X-CSRF-HEADER':'X-CSRF-TOKEN','X-CSRF-TOKEN':authInfo.csrf.job};var params={_program:\"/gelcontent/Demo/VISUAL/Jobs/extractData\",reqType:\"gettables\",lib:selectedLibrary};Instance.get(endpoint,{headers:headers,params:params}).then(function(response){var data=response.data.map(function(element){return[element.memname];});setTables(data);setLoading(false);});}},[selectedLibrary,authInfo.csrf.job]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Form,{onSubmit:props.onSelect,style:{padding:10},children:/*#__PURE__*/_jsxs(Form.Row,{children:[/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(LibrarySelector,{data:libraries,type:\"SAS\",handleSelection:getSelectedLibrary})}),/*#__PURE__*/_jsx(Col,{sm:\"7\",children:/*#__PURE__*/_jsx(TableSelector,{data:tables,type:\"SAS\",disabled:selectedLibrary===null?true:false,handleSelection:getSelectedTable})}),/*#__PURE__*/_jsx(Col,{sm:\"1\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:selectedTable===null?true:false,children:\"Display\"})})]})}),/*#__PURE__*/_jsx(Loading,{status:loading})]});}export default JobSelector;","map":{"version":3,"names":["React","Fragment","useState","useContext","useEffect","Form","Col","Button","AuthContext","Instance","LibrarySelector","TableSelector","Loading","JobSelector","props","authInfo","libraries","setLibraries","tables","setTables","selectedLibrary","setSelectedLibrary","selectedTable","setSelectedTable","loading","setLoading","getSelectedLibrary","selected","target","value","getSelectedTable","authenticated","csrf","job","undefined","endpoint","headers","params","_program","reqType","get","then","response","data","map","element","libname","lib","memname","onSelect","padding"],"sources":["C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/src/components/Selectors/JobSelector.js"],"sourcesContent":["import React, { Fragment, useState, useContext, useEffect } from 'react';\r\n\r\nimport { Form, Col, Button } from 'react-bootstrap';\r\n\r\nimport { AuthContext } from '../../contexts';\r\n\r\nimport Instance from '../../apis/Instance';\r\n\r\nimport LibrarySelector from '../Selectors/LibrarySelector';\r\nimport TableSelector from '../Selectors/TableSelector';\r\nimport Loading from '../Loading';\r\n\r\nfunction JobSelector(props) {\r\n    const { authInfo } = useContext(AuthContext);\r\n    const [libraries, setLibraries] = useState([]);\r\n    const [tables, setTables] = useState([]);\r\n    const [selectedLibrary, setSelectedLibrary] = useState(null);\r\n    const [selectedTable, setSelectedTable] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const getSelectedLibrary = (selected) => {\r\n        setSelectedLibrary(selected.target.value);\r\n    }\r\n    const getSelectedTable = (selected) => {\r\n        setSelectedTable(selected.target.value);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (authInfo.authenticated === true && authInfo.csrf.job !== undefined) {\r\n            setLoading(true);\r\n            const endpoint = \"SASJobExecution/\";\r\n            const headers = {\r\n                'X-CSRF-HEADER': 'X-CSRF-TOKEN',\r\n                'X-CSRF-TOKEN': authInfo.csrf.job\r\n            }\r\n            const params = {\r\n                _program: \"/gelcontent/Demo/VISUAL/Jobs/extractData\",\r\n                reqType: \"getlibraries\"\r\n            }\r\n            Instance.get(endpoint, { headers: headers, params: params })\r\n                .then(response => {\r\n                    const data = response.data.map(element => [element.libname]);\r\n                    setLibraries(data);\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }, [authInfo.authenticated, authInfo.csrf, setLoading]);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        setSelectedTable(null);\r\n        setTables([]);\r\n        if (selectedLibrary !== null) {\r\n            const endpoint = \"SASJobExecution/\";\r\n            const headers = {\r\n                'X-CSRF-HEADER': 'X-CSRF-TOKEN',\r\n                'X-CSRF-TOKEN': authInfo.csrf.job\r\n            }\r\n            const params = {\r\n                _program: \"/gelcontent/Demo/VISUAL/Jobs/extractData\",\r\n                reqType: \"gettables\",\r\n                lib: selectedLibrary\r\n            }\r\n            Instance.get(endpoint, { headers: headers, params: params })\r\n                .then(response => {\r\n                    const data = response.data.map(element => [element.memname]);\r\n                    setTables(data);\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }, [selectedLibrary, authInfo.csrf.job]);\r\n\r\n    return (\r\n        <Fragment>\r\n            <Form onSubmit={props.onSelect} style={{ padding: 10 }}>\r\n                <Form.Row>\r\n                    <Col sm=\"4\">\r\n                        <LibrarySelector data={libraries} type=\"SAS\" handleSelection={getSelectedLibrary} />\r\n                    </Col>\r\n                    <Col sm=\"7\">\r\n                        <TableSelector data={tables} type=\"SAS\" disabled={selectedLibrary === null ? true : false} handleSelection={getSelectedTable} />\r\n                    </Col>\r\n                    <Col sm=\"1\">\r\n                        <Button variant=\"primary\" type=\"submit\" disabled={selectedTable === null ? true : false} >\r\n                            Display\r\n                    </Button>\r\n                    </Col>\r\n                </Form.Row>\r\n            </Form>\r\n            <Loading status={loading} />\r\n        </Fragment>\r\n    );\r\n}\r\n\r\nexport default JobSelector;"],"mappings":"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"},"metadata":{},"sourceType":"module"}