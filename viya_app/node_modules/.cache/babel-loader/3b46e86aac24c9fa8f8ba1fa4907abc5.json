{"ast":null,"code":"import _slicedToArray from\"C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext,Fragment}from'react';import Instance from'../../apis/Instance';import{AuthContext}from'../../contexts';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import Col from'react-bootstrap/Col';import LibrarySelector from'./LibrarySelector';import TableSelector from'./TableSelector';import Loading from'../Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CASSelector(props){var _useContext=useContext(AuthContext),authInfo=_useContext.authInfo;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),libraries=_useState2[0],setLibraries=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tables=_useState4[0],setTables=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedLibrary=_useState6[0],setSelectedLibrary=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedTable=_useState8[0],setSelectedTable=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var getSelectedLibrary=function getSelectedLibrary(selected){setSelectedLibrary(selected.target.value);};var getSelectedTable=function getSelectedTable(selected){setSelectedTable(selected.target.value);};useEffect(function(){setLoading(true);if(\"cas\"in authInfo.session&&authInfo.session.cas!==undefined){var endpoint=\"/cas-shared-default-http/cas/sessions/\".concat(authInfo.session.cas,\"/actions/table.caslibInfo\");Instance.post(endpoint).then(function(response){setLibraries(response.data.results.CASLibInfo.rows);setLoading(false);});}},[authInfo.session,setLoading]);useEffect(function(){setLoading(true);setSelectedTable(null);setTables([]);if(selectedLibrary!==null){var endpoint=\"/cas-shared-default-http/cas/sessions/\".concat(authInfo.session.cas,\"/actions/table.tableInfo\");var headers={\"accept\":\"application/json\",\"content-type\":\"application/json\"};var data={\"caslib\":selectedLibrary};Instance.post(endpoint,data,{headers:headers}).then(function(response){if(\"results\"in response.data){setTables(response.data.results.TableInfo.rows);}setLoading(false);});}},[selectedLibrary,authInfo.session.cas]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Form,{onSubmit:props.onSelect,style:{padding:10},children:/*#__PURE__*/_jsxs(Form.Row,{children:[/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(LibrarySelector,{data:libraries,type:\"CAS\",handleSelection:getSelectedLibrary})}),/*#__PURE__*/_jsx(Col,{sm:\"7\",children:/*#__PURE__*/_jsx(TableSelector,{data:tables,type:\"CAS\",disabled:selectedLibrary===null?true:false,handleSelection:getSelectedTable})}),/*#__PURE__*/_jsx(Col,{sm:\"1\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:selectedTable===null?true:false,children:\"Display\"})})]})}),/*#__PURE__*/_jsx(Loading,{status:loading})]});}export default CASSelector;","map":{"version":3,"names":["React","useEffect","useState","useContext","Fragment","Instance","AuthContext","Form","Button","Col","LibrarySelector","TableSelector","Loading","CASSelector","props","authInfo","libraries","setLibraries","tables","setTables","selectedLibrary","setSelectedLibrary","selectedTable","setSelectedTable","loading","setLoading","getSelectedLibrary","selected","target","value","getSelectedTable","session","cas","undefined","endpoint","post","then","response","data","results","CASLibInfo","rows","headers","TableInfo","onSelect","padding"],"sources":["C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/src/components/Selectors/CASSelector.js"],"sourcesContent":["import React, { useEffect, useState, useContext, Fragment } from 'react';\r\n\r\nimport Instance from '../../apis/Instance';\r\n\r\nimport { AuthContext } from '../../contexts';\r\n\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Col from 'react-bootstrap/Col';\r\n\r\nimport LibrarySelector from './LibrarySelector';\r\nimport TableSelector from './TableSelector';\r\nimport Loading from '../Loading';\r\n\r\nfunction CASSelector(props) {\r\n    const { authInfo } = useContext(AuthContext);\r\n    const [libraries, setLibraries] = useState([]);\r\n    const [tables, setTables] = useState([]);\r\n    const [selectedLibrary, setSelectedLibrary] = useState(null);\r\n    const [selectedTable, setSelectedTable] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const getSelectedLibrary = (selected) => {\r\n        setSelectedLibrary(selected.target.value);\r\n    }\r\n    const getSelectedTable = (selected) => {\r\n        setSelectedTable(selected.target.value);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        if (\"cas\" in authInfo.session && authInfo.session.cas !== undefined) {\r\n            const endpoint = `/cas-shared-default-http/cas/sessions/${authInfo.session.cas}/actions/table.caslibInfo`;\r\n            Instance.post(endpoint)\r\n                .then(response => {\r\n                    setLibraries(response.data.results.CASLibInfo.rows);\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }, [authInfo.session, setLoading]);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        setSelectedTable(null);\r\n        setTables([]);\r\n        if (selectedLibrary !== null) {\r\n            const endpoint = `/cas-shared-default-http/cas/sessions/${authInfo.session.cas}/actions/table.tableInfo`;\r\n            const headers = {\r\n                \"accept\": \"application/json\",\r\n                \"content-type\": \"application/json\"\r\n            };\r\n            const data = { \"caslib\": selectedLibrary };\r\n            Instance.post(endpoint, data, { headers: headers })\r\n                .then(response => {\r\n                    if (\"results\" in response.data) {\r\n                        setTables(response.data.results.TableInfo.rows);\r\n                    }\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }, [selectedLibrary, authInfo.session.cas]);\r\n\r\n    return (\r\n        <Fragment>\r\n            <Form onSubmit={props.onSelect} style={{ padding: 10 }}>\r\n                <Form.Row>\r\n                    <Col sm=\"4\">\r\n                        <LibrarySelector data={libraries} type=\"CAS\" handleSelection={getSelectedLibrary} />\r\n                    </Col>\r\n                    <Col sm=\"7\">\r\n                        <TableSelector data={tables} type=\"CAS\" disabled={selectedLibrary === null ? true : false} handleSelection={getSelectedTable} />\r\n                    </Col>\r\n                    <Col sm=\"1\">\r\n                        <Button variant=\"primary\" type=\"submit\" disabled={selectedTable === null ? true : false} >\r\n                            Display\r\n                    </Button>\r\n                    </Col>\r\n                </Form.Row>\r\n            </Form>\r\n            <Loading status={loading} />\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default CASSelector;"],"mappings":"kKAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,UAArC,CAAiDC,QAAjD,KAAiE,OAAjE,CAEA,MAAOC,SAAP,KAAqB,qBAArB,CAEA,OAASC,WAAT,KAA4B,gBAA5B,CAEA,MAAOC,KAAP,KAAiB,sBAAjB,CACA,MAAOC,OAAP,KAAmB,wBAAnB,CACA,MAAOC,IAAP,KAAgB,qBAAhB,CAEA,MAAOC,gBAAP,KAA4B,mBAA5B,CACA,MAAOC,cAAP,KAA0B,iBAA1B,CACA,MAAOC,QAAP,KAAoB,YAApB,C,wFAEA,QAASC,YAAT,CAAqBC,KAArB,CAA4B,CACxB,gBAAqBX,UAAU,CAACG,WAAD,CAA/B,CAAQS,QAAR,aAAQA,QAAR,CACA,cAAkCb,QAAQ,CAAC,EAAD,CAA1C,wCAAOc,SAAP,eAAkBC,YAAlB,eACA,eAA4Bf,QAAQ,CAAC,EAAD,CAApC,yCAAOgB,MAAP,eAAeC,SAAf,eACA,eAA8CjB,QAAQ,CAAC,IAAD,CAAtD,yCAAOkB,eAAP,eAAwBC,kBAAxB,eACA,eAA0CnB,QAAQ,CAAC,IAAD,CAAlD,yCAAOoB,aAAP,eAAsBC,gBAAtB,eACA,eAA8BrB,QAAQ,CAAC,KAAD,CAAtC,0CAAOsB,OAAP,gBAAgBC,UAAhB,gBAEA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,QAAD,CAAc,CACrCN,kBAAkB,CAACM,QAAQ,CAACC,MAAT,CAAgBC,KAAjB,CAAlB,CACH,CAFD,CAGA,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACH,QAAD,CAAc,CACnCJ,gBAAgB,CAACI,QAAQ,CAACC,MAAT,CAAgBC,KAAjB,CAAhB,CACH,CAFD,CAIA5B,SAAS,CAAC,UAAM,CACZwB,UAAU,CAAC,IAAD,CAAV,CACA,GAAI,OAASV,SAAQ,CAACgB,OAAlB,EAA6BhB,QAAQ,CAACgB,OAAT,CAAiBC,GAAjB,GAAyBC,SAA1D,CAAqE,CACjE,GAAMC,SAAQ,iDAA4CnB,QAAQ,CAACgB,OAAT,CAAiBC,GAA7D,6BAAd,CACA3B,QAAQ,CAAC8B,IAAT,CAAcD,QAAd,EACKE,IADL,CACU,SAAAC,QAAQ,CAAI,CACdpB,YAAY,CAACoB,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsBC,UAAtB,CAAiCC,IAAlC,CAAZ,CACAhB,UAAU,CAAC,KAAD,CAAV,CACH,CAJL,EAKH,CACJ,CAVQ,CAUN,CAACV,QAAQ,CAACgB,OAAV,CAAmBN,UAAnB,CAVM,CAAT,CAYAxB,SAAS,CAAC,UAAM,CACZwB,UAAU,CAAC,IAAD,CAAV,CACAF,gBAAgB,CAAC,IAAD,CAAhB,CACAJ,SAAS,CAAC,EAAD,CAAT,CACA,GAAIC,eAAe,GAAK,IAAxB,CAA8B,CAC1B,GAAMc,SAAQ,iDAA4CnB,QAAQ,CAACgB,OAAT,CAAiBC,GAA7D,4BAAd,CACA,GAAMU,QAAO,CAAG,CACZ,SAAU,kBADE,CAEZ,eAAgB,kBAFJ,CAAhB,CAIA,GAAMJ,KAAI,CAAG,CAAE,SAAUlB,eAAZ,CAAb,CACAf,QAAQ,CAAC8B,IAAT,CAAcD,QAAd,CAAwBI,IAAxB,CAA8B,CAAEI,OAAO,CAAEA,OAAX,CAA9B,EACKN,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAI,WAAaA,SAAQ,CAACC,IAA1B,CAAgC,CAC5BnB,SAAS,CAACkB,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsBI,SAAtB,CAAgCF,IAAjC,CAAT,CACH,CACDhB,UAAU,CAAC,KAAD,CAAV,CACH,CANL,EAOH,CACJ,CAnBQ,CAmBN,CAACL,eAAD,CAAkBL,QAAQ,CAACgB,OAAT,CAAiBC,GAAnC,CAnBM,CAAT,CAqBA,mBACI,MAAC,QAAD,yBACI,KAAC,IAAD,EAAM,QAAQ,CAAElB,KAAK,CAAC8B,QAAtB,CAAgC,KAAK,CAAE,CAAEC,OAAO,CAAE,EAAX,CAAvC,uBACI,MAAC,IAAD,CAAM,GAAN,yBACI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,KAAC,eAAD,EAAiB,IAAI,CAAE7B,SAAvB,CAAkC,IAAI,CAAC,KAAvC,CAA6C,eAAe,CAAEU,kBAA9D,EADJ,EADJ,cAII,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,KAAC,aAAD,EAAe,IAAI,CAAER,MAArB,CAA6B,IAAI,CAAC,KAAlC,CAAwC,QAAQ,CAAEE,eAAe,GAAK,IAApB,CAA2B,IAA3B,CAAkC,KAApF,CAA2F,eAAe,CAAEU,gBAA5G,EADJ,EAJJ,cAOI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,QAAQ,CAAER,aAAa,GAAK,IAAlB,CAAyB,IAAzB,CAAgC,KAAlF,qBADJ,EAPJ,GADJ,EADJ,cAgBI,KAAC,OAAD,EAAS,MAAM,CAAEE,OAAjB,EAhBJ,GADJ,CAoBH,CAED,cAAeX,YAAf"},"metadata":{},"sourceType":"module"}