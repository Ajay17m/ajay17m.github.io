{"ast":null,"code":"import _slicedToArray from\"C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useContext,Fragment}from'react';import{useHistory}from'react-router-dom';import Instance from'../apis/Instance';import{AuthContext}from'../contexts';import MASForm from'../components/MASForm';import MASResults from'../components/MASResults';import Loading from'../components/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Mas(){var _useContext=useContext(AuthContext),authInfo=_useContext.authInfo;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),scoreData=_useState4[0],setScoreData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var history=useHistory();useEffect(function(){if(authInfo.authenticated===false){history.push(\"/logon\");}},[authInfo.authenticated,history]);var handleEvaluate=function handleEvaluate(selection){setLoading(true);var endpoint='microanalyticScore/modules/heart_attack_prediction/steps/score';var headers={'Content-Type':'application/vnd.sas.microanalytic.module.step.input+json','Accept':'application/vnd.sas.microanalytic.module.step.output+json'};var formData={inputs:[]};for(var element in selection){var data=selection[element];formData.inputs.push({name:data.variable,value:data.value});};Instance.post(endpoint,formData,{headers:headers}).then(function(response){if(response.status===201&&response.data.executionState===\"completed\"){var output={};response.data.outputs.forEach(function(variable){return output[variable.name]=variable.value;});setScoreData(output);setLoading(false);}else{setMessage(\"Please try again!\");}});};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MASForm,{onEvaluate:handleEvaluate}),/*#__PURE__*/_jsx(Loading,{status:loading}),Object.keys(scoreData).length===0?null:/*#__PURE__*/_jsx(MASResults,{data:scoreData,message:message})]});}export default Mas;","map":{"version":3,"names":["useEffect","useState","useContext","Fragment","useHistory","Instance","AuthContext","MASForm","MASResults","Loading","Mas","authInfo","loading","setLoading","scoreData","setScoreData","message","setMessage","history","authenticated","push","handleEvaluate","selection","endpoint","headers","formData","inputs","element","data","name","variable","value","post","then","response","status","executionState","output","outputs","forEach","Object","keys","length"],"sources":["C:/Users/sinajp/OneDrive - SAS/Documents/GitHub/ajay17m.github.io-1/viya_app/src/pages/Mas.js"],"sourcesContent":["import { useEffect, useState, useContext, Fragment } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport Instance from '../apis/Instance';\r\n\r\nimport { AuthContext } from '../contexts';\r\n\r\nimport MASForm from '../components/MASForm';\r\nimport MASResults from '../components/MASResults';\r\nimport Loading from '../components/Loading';\r\n\r\nfunction Mas() {\r\n    const { authInfo } = useContext(AuthContext);\r\n    const [loading, setLoading] = useState(false);\r\n    const [scoreData, setScoreData] = useState({});\r\n    const [message, setMessage] = useState();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if (authInfo.authenticated === false) {\r\n            history.push(\"/logon\");\r\n        }\r\n    }, [authInfo.authenticated, history]);\r\n\r\n    const handleEvaluate = (selection) => {\r\n        setLoading(true)\r\n        const endpoint = 'microanalyticScore/modules/heart_attack_prediction/steps/score';\r\n        const headers = {\r\n            'Content-Type': 'application/vnd.sas.microanalytic.module.step.input+json',\r\n            'Accept': 'application/vnd.sas.microanalytic.module.step.output+json'\r\n        };\r\n        const formData = { inputs: [] };\r\n        for (let element in selection) {\r\n            const data = selection[element];\r\n            formData.inputs.push({ name: data.variable, value: data.value });\r\n        };\r\n\r\n        Instance.post(endpoint, formData, { headers: headers })\r\n            .then(response => {\r\n                if (response.status === 201 && response.data.executionState === \"completed\") {\r\n                    const output = {};\r\n                    response.data.outputs.forEach(variable => output[variable.name] = variable.value);\r\n                    setScoreData(output);\r\n                    setLoading(false);\r\n                } else {\r\n                    setMessage(\"Please try again!\");\r\n                }\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <MASForm onEvaluate={handleEvaluate} />\r\n            <Loading status={loading} />\r\n            { Object.keys(scoreData).length === 0 ? null : <MASResults data={scoreData} message={message} />}\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default Mas;"],"mappings":"kKAAA,OAASA,SAAT,CAAoBC,QAApB,CAA8BC,UAA9B,CAA0CC,QAA1C,KAA0D,OAA1D,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,MAAOC,SAAP,KAAqB,kBAArB,CAEA,OAASC,WAAT,KAA4B,aAA5B,CAEA,MAAOC,QAAP,KAAoB,uBAApB,CACA,MAAOC,WAAP,KAAuB,0BAAvB,CACA,MAAOC,QAAP,KAAoB,uBAApB,C,wFAEA,QAASC,IAAT,EAAe,CACX,gBAAqBR,UAAU,CAACI,WAAD,CAA/B,CAAQK,QAAR,aAAQA,QAAR,CACA,cAA8BV,QAAQ,CAAC,KAAD,CAAtC,wCAAOW,OAAP,eAAgBC,UAAhB,eACA,eAAkCZ,QAAQ,CAAC,EAAD,CAA1C,yCAAOa,SAAP,eAAkBC,YAAlB,eACA,eAA8Bd,QAAQ,EAAtC,yCAAOe,OAAP,eAAgBC,UAAhB,eACA,GAAMC,QAAO,CAAGd,UAAU,EAA1B,CAEAJ,SAAS,CAAC,UAAM,CACZ,GAAIW,QAAQ,CAACQ,aAAT,GAA2B,KAA/B,CAAsC,CAClCD,OAAO,CAACE,IAAR,CAAa,QAAb,EACH,CACJ,CAJQ,CAIN,CAACT,QAAQ,CAACQ,aAAV,CAAyBD,OAAzB,CAJM,CAAT,CAMA,GAAMG,eAAc,CAAG,QAAjBA,eAAiB,CAACC,SAAD,CAAe,CAClCT,UAAU,CAAC,IAAD,CAAV,CACA,GAAMU,SAAQ,CAAG,gEAAjB,CACA,GAAMC,QAAO,CAAG,CACZ,eAAgB,0DADJ,CAEZ,SAAU,2DAFE,CAAhB,CAIA,GAAMC,SAAQ,CAAG,CAAEC,MAAM,CAAE,EAAV,CAAjB,CACA,IAAK,GAAIC,QAAT,GAAoBL,UAApB,CAA+B,CAC3B,GAAMM,KAAI,CAAGN,SAAS,CAACK,OAAD,CAAtB,CACAF,QAAQ,CAACC,MAAT,CAAgBN,IAAhB,CAAqB,CAAES,IAAI,CAAED,IAAI,CAACE,QAAb,CAAuBC,KAAK,CAAEH,IAAI,CAACG,KAAnC,CAArB,EACH,EAED1B,QAAQ,CAAC2B,IAAT,CAAcT,QAAd,CAAwBE,QAAxB,CAAkC,CAAED,OAAO,CAAEA,OAAX,CAAlC,EACKS,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAApB,EAA2BD,QAAQ,CAACN,IAAT,CAAcQ,cAAd,GAAiC,WAAhE,CAA6E,CACzE,GAAMC,OAAM,CAAG,EAAf,CACAH,QAAQ,CAACN,IAAT,CAAcU,OAAd,CAAsBC,OAAtB,CAA8B,SAAAT,QAAQ,QAAIO,OAAM,CAACP,QAAQ,CAACD,IAAV,CAAN,CAAwBC,QAAQ,CAACC,KAArC,EAAtC,EACAhB,YAAY,CAACsB,MAAD,CAAZ,CACAxB,UAAU,CAAC,KAAD,CAAV,CACH,CALD,IAKO,CACHI,UAAU,CAAC,mBAAD,CAAV,CACH,CACJ,CAVL,EAWH,CAxBD,CA0BA,mBACI,MAAC,QAAD,yBACI,KAAC,OAAD,EAAS,UAAU,CAAEI,cAArB,EADJ,cAEI,KAAC,OAAD,EAAS,MAAM,CAAET,OAAjB,EAFJ,CAGM4B,MAAM,CAACC,IAAP,CAAY3B,SAAZ,EAAuB4B,MAAvB,GAAkC,CAAlC,CAAsC,IAAtC,cAA6C,KAAC,UAAD,EAAY,IAAI,CAAE5B,SAAlB,CAA6B,OAAO,CAAEE,OAAtC,EAHnD,GADJ,CAOH,CAED,cAAeN,IAAf"},"metadata":{},"sourceType":"module"}